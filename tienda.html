<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bara & Co · Tienda</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Estilos Globales -->
    <link rel="stylesheet" href="css/global.css">
    
    <style>
        /* Estilos específicos para tienda */
        .shop-header {
            padding: 120px 0 40px;
            text-align: center;
            background: var(--color-bg);
        }

        .shop-title {
            font-family: var(--font-serif);
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .filter-section {
            padding: 20px 0 40px;
            border-bottom: 1px solid var(--color-border);
            margin-bottom: 40px;
        }

        .filter-tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .filter-tab {
            padding: 12px 32px;
            background: transparent;
            border: 1px solid #ddd;
            font-size: 0.95rem;
            font-weight: 500;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
        }

        .filter-tab::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--color-text-primary);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
            z-index: -1;
        }

        .filter-tab:hover {
            color: white;
            border-color: var(--color-text-primary);
        }

        .filter-tab:hover::before {
            width: 300px;
            height: 300px;
        }

        .filter-tab.active {
            background: var(--color-text-primary);
            color: white;
            border-color: var(--color-text-primary);
        }

        .filter-panels {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .filter-group {
            position: relative;
        }

        .filter-button {
            padding: 10px 20px;
            background: white;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 160px;
            justify-content: space-between;
        }

        .filter-button:hover {
            border-color: var(--color-text-primary);
        }

        .filter-button.active i {
            transform: rotate(180deg);
        }

        .filter-dropdown {
            position: absolute;
            top: 110%;
            left: 0;
            width: 100%;
            background: white;
            border: 1px solid #eee;
            box-shadow: 0 20px 40px rgba(0,0,0,0.05);
            padding: 15px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
            z-index: 100;
        }

        .filter-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .filter-option {
            padding: 8px 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-option:hover {
            background: #f5f5f5;
            padding-left: 15px;
        }

        .filter-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--color-accent);
        }

        .active-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 30px;
            justify-content: center;
        }

        .active-filter {
            background: #f5f5f5;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            animation: slideIn 0.3s ease;
        }

        .remove-filter {
            cursor: pointer;
            transition: all 0.2s;
        }

        .remove-filter:hover {
            color: #ff4444;
            transform: scale(1.2);
        }

        .clear-all {
            background: transparent;
            border: none;
            color: var(--color-text-secondary);
            text-decoration: underline;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .clear-all:hover {
            color: var(--color-text-primary);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .results-count {
            font-size: 0.95rem;
            color: var(--color-text-secondary);
        }

        .results-count span {
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .sort-select {
            padding: 10px 20px;
            border: 1px solid #ddd;
            font-family: var(--font-sans);
            cursor: pointer;
            background: white;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 60px;
        }

        .product-card {
            cursor: pointer;
            opacity: 1;
            transform: scale(1);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-card.hide {
            opacity: 0;
            transform: scale(0.8);
            width: 0;
            height: 0;
            margin: 0;
            padding: 0;
            pointer-events: none;
        }

        .product-image {
            aspect-ratio: 3/4;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-category-tag {
            position: absolute;
            top: 15px;
            left: 15px;
            background: white;
            padding: 5px 12px;
            font-size: 0.75rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--color-text-primary);
            color: white;
            padding: 4px 12px;
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            z-index: 2;
        }

        .product-info {
            text-align: center;
        }

        .product-title {
            font-family: var(--font-serif);
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .product-category {
            color: var(--color-text-secondary);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .product-price {
            font-weight: 600;
        }

        .product-price s {
            color: #999;
            margin-right: 5px;
            font-size: 0.9rem;
        }

        @media (max-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .shop-title {
                font-size: 2.5rem;
            }
            
            .filter-tabs {
                flex-direction: column;
                padding: 0 20px;
            }
            
            .filter-tab {
                width: 100%;
            }
            
            .filter-panels {
                flex-direction: column;
                padding: 0 20px;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .filter-button {
                width: 100%;
            }
            
            .filter-dropdown {
                width: 100%;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .results-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .sort-select {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Cursor Personalizado -->
    <div class="custom-cursor"></div>
    <div class="cursor-dot"></div>

    <!-- Header -->
    <header id="header">
        <div class="header-container">
            <a href="index.html" class="logo">Bara & Co</a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="index.html" class="nav-link">Inicio</a></li>
                    <li><a href="tienda.html" class="nav-link active">Tienda</a></li>
                    <li><a href="lookbook.html" class="nav-link">Lookbook</a></li>
                    <li><a href="#contacto" class="nav-link">Contacto</a></li>
                </ul>
                <div class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
            <div class="header-icons">
                <i class="fas fa-search"></i>
                <a href="#"><i class="fas fa-user"></i></a>
                <div class="cart-icon-wrapper" onclick="toggleCart()">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-count">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Tienda Header -->
    <div class="shop-header">
        <div class="container">
            <h1 class="shop-title">Tienda</h1>
            <p style="color: var(--color-text-secondary); max-width: 600px; margin: 0 auto;">Descubrí nuestra colección completa. Ropa urbana con identidad.</p>
        </div>
    </div>

    <!-- Filtros -->
    <div class="filter-section">
        <div class="container">
            <!-- Tabs de categoría -->
            <div class="filter-tabs">
                <button class="filter-tab active" onclick="filtrarPorCategoria('todos')">Todos</button>
                <button class="filter-tab" onclick="filtrarPorCategoria('mujer')">Mujer</button>
                <button class="filter-tab" onclick="filtrarPorCategoria('hombre')">Hombre</button>
                <button class="filter-tab" onclick="filtrarPorCategoria('accesorios')">Accesorios</button>
                <button class="filter-tab" onclick="filtrarPorCategoria('sale')">Sale</button>
            </div>

            <!-- Filtros desplegables -->
            <div class="filter-panels">
                <div class="filter-group">
                    <div class="filter-button" onclick="toggleDropdown(this)">
                        <span>Talle</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="filter-dropdown">
                        <div class="filter-option">
                            <input type="checkbox" value="S" onchange="aplicarFiltros()"> S
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="M" onchange="aplicarFiltros()"> M
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="L" onchange="aplicarFiltros()"> L
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="XL" onchange="aplicarFiltros()"> XL
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <div class="filter-button" onclick="toggleDropdown(this)">
                        <span>Color</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="filter-dropdown">
                        <div class="filter-option">
                            <input type="checkbox" value="Negro" onchange="aplicarFiltros()"> Negro
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="Blanco" onchange="aplicarFiltros()"> Blanco
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="Gris" onchange="aplicarFiltros()"> Gris
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="Azul" onchange="aplicarFiltros()"> Azul
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="Oliva" onchange="aplicarFiltros()"> Oliva
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <div class="filter-button" onclick="toggleDropdown(this)">
                        <span>Precio</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="filter-dropdown">
                        <div class="filter-option">
                            <input type="checkbox" value="0-5000" onchange="aplicarFiltros()"> $0 - $5.000
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="5000-10000" onchange="aplicarFiltros()"> $5.000 - $10.000
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="10000-20000" onchange="aplicarFiltros()"> $10.000 - $20.000
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" value="20000+" onchange="aplicarFiltros()"> $20.000+
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filtros activos -->
            <div class="active-filters" id="activeFilters"></div>
        </div>
    </div>

    <!-- Resultados y Productos -->
    <div class="container">
        <div class="results-header">
            <div class="results-count">
                <span id="productCount">15</span> productos encontrados
            </div>
            <select class="sort-select" onchange="ordenarProductos(this.value)">
                <option value="default">Ordenar por</option>
                <option value="price-asc">Menor precio</option>
                <option value="price-desc">Mayor precio</option>
                <option value="name-asc">A-Z</option>
                <option value="name-desc">Z-A</option>
            </select>
        </div>

        <!-- Grid de Productos -->
        <div class="products-grid" id="productsGrid">
            <!-- Producto 1 - Mujer -->
            <div class="product-card" data-category="mujer" data-size="S M L" data-color="Negro" data-price="7999" data-name="Remera Oversize" onclick="window.location.href='producto.html?id=1'">
                <div class="product-image">
                    <span class="product-category-tag">Mujer</span>
                    <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Remera Oversize">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Remera Oversize</h3>
                    <div class="product-category">Negro</div>
                    <div class="product-price">$7.999</div>
                </div>
            </div>

            <!-- Producto 2 - Mujer -->
            <div class="product-card" data-category="mujer" data-size="S M L" data-color="Blanco" data-price="7999" data-name="Remera Oversize Blanca" onclick="window.location.href='producto.html?id=2'">
                <div class="product-image">
                    <span class="product-category-tag">Mujer</span>
                    <img src="https://images.unsplash.com/photo-1489987707025-afc232f7ea0f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Remera Blanca">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Remera Oversize</h3>
                    <div class="product-category">Blanco</div>
                    <div class="product-price">$7.999</div>
                </div>
            </div>

            <!-- Producto 3 - Mujer -->
            <div class="product-card" data-category="mujer" data-size="24 25 26" data-color="Azul" data-price="15999" data-name="Jean Holgado" onclick="window.location.href='producto.html?id=3'">
                <div class="product-image">
                    <span class="product-category-tag">Mujer</span>
                    <img src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Jean Holgado">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Jean Holgado</h3>
                    <div class="product-category">Azul</div>
                    <div class="product-price">$15.999</div>
                </div>
            </div>

            <!-- Producto 4 - Hombre -->
            <div class="product-card" data-category="hombre" data-size="M L XL" data-color="Negro" data-price="15999" data-name="Jean Slim" onclick="window.location.href='producto.html?id=4'">
                <div class="product-image">
                    <span class="product-category-tag">Hombre</span>
                    <img src="https://images.unsplash.com/photo-1475178626620-a4d074967452?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Jean Slim">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Jean Slim</h3>
                    <div class="product-category">Negro</div>
                    <div class="product-price">$15.999</div>
                </div>
            </div>

            <!-- Producto 5 - Hombre -->
            <div class="product-card" data-category="hombre" data-size="S M L" data-color="Gris" data-price="18999" data-name="Buzo Canguro" onclick="window.location.href='producto.html?id=5'">
                <div class="product-image">
                    <span class="product-category-tag">Hombre</span>
                    <span class="product-badge">Nuevo</span>
                    <img src="https://images.unsplash.com/photo-1556306535-0f09a537f0a3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Buzo Canguro">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Buzo Canguro</h3>
                    <div class="product-category">Gris</div>
                    <div class="product-price">$18.999</div>
                </div>
            </div>

            <!-- Producto 6 - Hombre -->
            <div class="product-card" data-category="hombre" data-size="S M L XL" data-color="Negro" data-price="22999" data-name="Campera Jean" onclick="window.location.href='producto.html?id=6'">
                <div class="product-image">
                    <span class="product-category-tag">Hombre</span>
                    <img src="https://images.unsplash.com/photo-1524592001865-b32997a13083?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Campera Jean">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Campera Jean</h3>
                    <div class="product-category">Negro</div>
                    <div class="product-price">$22.999</div>
                </div>
            </div>

            <!-- Producto 7 - Accesorios -->
            <div class="product-card" data-category="accesorios" data-size="Unico" data-color="Madera" data-price="4999" data-name="Abanico Artesanal" onclick="window.location.href='producto.html?id=7'">
                <div class="product-image">
                    <span class="product-category-tag">Accesorios</span>
                    <img src="https://images.unsplash.com/photo-1564584217132-2271feaeb3c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Abanico">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Abanico Artesanal</h3>
                    <div class="product-category">Madera</div>
                    <div class="product-price">$4.999</div>
                </div>
            </div>

            <!-- Producto 8 - Accesorios -->
            <div class="product-card" data-category="accesorios" data-size="Unico" data-color="Plata" data-price="5949" data-name="Colgante Luna" onclick="window.location.href='producto.html?id=8'">
                <div class="product-image">
                    <span class="product-category-tag">Accesorios</span>
                    <span class="product-badge">-15%</span>
                    <img src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Colgante">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Colgante Luna</h3>
                    <div class="product-category">Plata</div>
                    <div class="product-price"><s>$6.999</s> $5.949</div>
                </div>
            </div>

            <!-- Producto 9 - Sale Hombre -->
            <div class="product-card" data-category="hombre sale" data-size="M L" data-color="Oliva" data-price="11999" data-name="Bermuda Cargo" onclick="window.location.href='producto.html?id=9'">
                <div class="product-image">
                    <span class="product-category-tag">Sale</span>
                    <span class="product-badge">-30%</span>
                    <img src="https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Bermuda">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Bermuda Cargo</h3>
                    <div class="product-category">Oliva</div>
                    <div class="product-price"><s>$17.999</s> $11.999</div>
                </div>
            </div>

            <!-- Producto 10 - Sale Mujer -->
            <div class="product-card" data-category="mujer sale" data-size="S M" data-color="Negro" data-price="13999" data-name="Vestido Negro" onclick="window.location.href='producto.html?id=10'">
                <div class="product-image">
                    <span class="product-category-tag">Sale</span>
                    <span class="product-badge">-20%</span>
                    <img src="https://images.unsplash.com/photo-1539008835657-9e8e9680c956?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Vestido">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Vestido Negro</h3>
                    <div class="product-category">Negro</div>
                    <div class="product-price"><s>$17.499</s> $13.999</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="contacto">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="footer-logo">Bara & Co</div>
                    <p class="footer-text">Indumentaria urbana con personalidad. Diseño y confort para tu día a día.</p>
                    <div class="social-icons">
                        <i class="fab fa-instagram"></i>
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-tiktok"></i>
                    </div>
                </div>
                <div>
                    <h4 class="footer-title">Categorías</h4>
                    <ul class="footer-links">
                        <li><a href="tienda.html?categoria=mujer">Mujer</a></li>
                        <li><a href="tienda.html?categoria=hombre">Hombre</a></li>
                        <li><a href="tienda.html?categoria=accesorios">Accesorios</a></li>
                        <li><a href="tienda.html?categoria=sale">Sale</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Ayuda</h4>
                    <ul class="footer-links">
                        <li><a href="#">Envíos</a></li>
                        <li><a href="#">Cambios y devoluciones</a></li>
                        <li><a href="#">Preguntas frecuentes</a></li>
                        <li><a href="#">Contacto</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Newsletter</h4>
                    <p class="footer-text">Sumate. 10% OFF en tu primera compra.</p>
                    <div class="newsletter-input">
                        <input type="email" placeholder="Tu email">
                        <button><i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="legal-info">
                    <span>© 2026 Bara & Co</span>
                    <span>CUIT 30-71234567-8</span>
                    <span>Ing. Olmos 139 – Jesús María</span>
                </div>
                <div class="legal-info">
                    <span>Términos y condiciones</span>
                    <span>Política de privacidad</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- CARRITO FLOTANTE (GLOBAL) -->
    <div class="cart-icon" onclick="toggleCart()">
        <i class="fas fa-shopping-bag"></i>
        <span class="cart-count">0</span>
    </div>

    <div class="cart-notification" id="cartNotification">
        <i class="fas fa-check-circle"></i>
        <span>Producto agregado</span>
    </div>

    <div class="cart-panel" id="cartPanel">
        <div class="cart-header">
            <h2 class="cart-title">Carrito</h2>
            <i class="fas fa-times close-cart" onclick="toggleCart()"></i>
        </div>
        <div class="cart-items">
            <!-- Se llena dinámicamente con JS -->
        </div>
        <div class="cart-footer">
            <div class="subtotal">
                <span>Subtotal</span>
                <span id="subtotal">$0</span>
            </div>
            <button class="checkout-btn" onclick="window.location.href='checkout.html'">
                <span>Finalizar compra</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="toggleCart()"></div>

    <!-- Scripts -->
    <script src="js/carrito.js"></script>
    <script>
        // ---------- SISTEMA DE FILTROS ----------
        let categoriaActiva = 'todos';

        function toggleDropdown(button) {
            button.classList.toggle('active');
            const dropdown = button.nextElementSibling;
            dropdown.classList.toggle('show');
            
            document.querySelectorAll('.filter-dropdown').forEach(d => {
                if (d !== dropdown) {
                    d.classList.remove('show');
                    d.previousElementSibling.classList.remove('active');
                }
            });
        }

        function filtrarPorCategoria(categoria) {
            categoriaActiva = categoria;
            
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.textContent.toLowerCase().includes(categoria) || 
                    (categoria === 'todos' && tab.textContent === 'Todos')) {
                    tab.classList.add('active');
                }
            });
            
            aplicarFiltros();
        }

        function obtenerCheckboxSeleccionados(nombreFiltro) {
            const valores = [];
            document.querySelectorAll('.filter-group').forEach(group => {
                const buttonText = group.querySelector('.filter-button span').innerText;
                if (buttonText === nombreFiltro) {
                    group.querySelectorAll('input[type="checkbox"]:checked').forEach(cb => {
                        valores.push(cb.value);
                    });
                }
            });
            return valores;
        }

        function aplicarFiltros() {
            const productos = document.querySelectorAll('.product-card');
            
            const tallesSel = obtenerCheckboxSeleccionados('Talle');
            const coloresSel = obtenerCheckboxSeleccionados('Color');
            const preciosSel = obtenerCheckboxSeleccionados('Precio');
            
            let visibles = 0;
            
            productos.forEach(producto => {
                let mostrar = true;
                
                if (categoriaActiva !== 'todos') {
                    const catProducto = producto.dataset.category.toLowerCase();
                    if (!catProducto.includes(categoriaActiva)) {
                        mostrar = false;
                    }
                }
                
                if (mostrar && tallesSel.length > 0) {
                    const prodTalles = producto.dataset.size;
                    const tieneTalle = tallesSel.some(talle => prodTalles.includes(talle));
                    if (!tieneTalle) mostrar = false;
                }
                
                if (mostrar && coloresSel.length > 0) {
                    const prodColor = producto.dataset.color;
                    if (!coloresSel.includes(prodColor)) mostrar = false;
                }
                
                if (mostrar && preciosSel.length > 0) {
                    const precio = parseInt(producto.dataset.price);
                    const precioMatch = preciosSel.some(range => {
                        if (range === '0-5000' && precio <= 5000) return true;
                        if (range === '5000-10000' && precio > 5000 && precio <= 10000) return true;
                        if (range === '10000-20000' && precio > 10000 && precio <= 20000) return true;
                        if (range === '20000+' && precio > 20000) return true;
                        return false;
                    });
                    if (!precioMatch) mostrar = false;
                }
                
                if (mostrar) {
                    producto.classList.remove('hide');
                    visibles++;
                } else {
                    producto.classList.add('hide');
                }
            });
            
            document.getElementById('productCount').textContent = visibles;
            actualizarFiltrosActivos();
        }

        function actualizarFiltrosActivos() {
            const container = document.getElementById('activeFilters');
            container.innerHTML = '';
            
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(cb => {
                const valor = cb.value;
                const grupo = cb.closest('.filter-group').querySelector('.filter-button span').innerText;
                
                const filtro = document.createElement('span');
                filtro.className = 'active-filter';
                filtro.innerHTML = `${grupo}: ${valor} <span class="remove-filter" onclick="removerFiltro(this, '${valor}')"><i class="fas fa-times"></i></span>`;
                container.appendChild(filtro);
            });
            
            if (document.querySelectorAll('input[type="checkbox"]:checked').length > 0) {
                const clearAll = document.createElement('button');
                clearAll.className = 'clear-all';
                clearAll.innerText = 'Limpiar todo';
                clearAll.onclick = limpiarTodosFiltros;
                container.appendChild(clearAll);
            }
        }

        function removerFiltro(element, valor) {
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                if (cb.value === valor) {
                    cb.checked = false;
                }
            });
            aplicarFiltros();
        }

        function limpiarTodosFiltros() {
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.textContent === 'Todos') {
                    tab.classList.add('active');
                }
            });
            
            categoriaActiva = 'todos';
            aplicarFiltros();
        }

        function ordenarProductos(orden) {
            const grid = document.getElementById('productsGrid');
            const productos = Array.from(document.querySelectorAll('.product-card:not(.hide)'));
            
            if (orden === 'price-asc') {
                productos.sort((a, b) => parseInt(a.dataset.price) - parseInt(b.dataset.price));
            } else if (orden === 'price-desc') {
                productos.sort((a, b) => parseInt(b.dataset.price) - parseInt(a.dataset.price));
            } else if (orden === 'name-asc') {
                productos.sort((a, b) => a.dataset.name.localeCompare(b.dataset.name));
            } else if (orden === 'name-desc') {
                productos.sort((a, b) => b.dataset.name.localeCompare(a.dataset.name));
            }
            
            productos.forEach(producto => grid.appendChild(producto));
        }

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.filter-group')) {
                document.querySelectorAll('.filter-dropdown').forEach(d => {
                    d.classList.remove('show');
                    d.previousElementSibling.classList.remove('active');
                });
            }
        });

        // Inicializar contador
        document.getElementById('productCount').textContent = document.querySelectorAll('.product-card:not(.hide)').length;
        
        // Cargar categoría desde URL
        const urlParams = new URLSearchParams(window.location.search);
        const categoria = urlParams.get('categoria');
        if (categoria) {
            filtrarPorCategoria(categoria);
        }
    </script>
</body>
</html>